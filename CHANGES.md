# שינויים שבוצעו בבוט

## תאריך: 10 בספטמבר 2025

### 1. תיקון בעיית זיהוי מלאי ב-Shufersal4u
- **הבעיה**: הבוט זיהה "במלאי" גם כשהמוצר היה אזל
- **הפתרון**: שינוי הגישה ממעקב אחרי סטטוס מלאי למעקב אחרי שינויים בעמוד

### 2. מעבר למעקב שינויים כללי
- **במקום**: לבדוק רק אם מוצר במלאי או לא
- **עכשיו**: הבוט מזהה כל שינוי משמעותי בעמוד:
  - שינוי בסטטוס מוצר
  - הוספת מבצעים חדשים
  - עדכון מחירים או תנאים
  - שינוי בזמינות של אופציות שונות

### 3. תמיכה בעמודים עם מספר מוצרים
- **בעיה**: בעמודים כמו משקארד יש כמה מוצרים/אופציות
- **פתרון**: הבוט מזהה שינוי בכל אחד מהם ומתריע בהתאם

### 4. זיהוי עמודי מבצעים חדשים
- **יכולת חדשה**: אפשר לעקוב אחרי עמוד מבצעים כללי
- **התראות**: על הוספת מבצעים חדשים לעמוד

## איך זה עובד?

### מעקב אחרי שינויים
1. הבוט יוצר "חתימה" (hash) של תוכן העמוד
2. בכל בדיקה, הוא משווה את החתימה הנוכחית לקודמת
3. אם יש שינוי - נשלחת התראה למשתמש

### סינון רעשים
הבוט מתעלם מ:
- תאריכים ושעות שמתעדכנים אוטומטית
- מספרי צפיות ומבקרים
- מזהי סשן וטוקנים זמניים

### התראות חכמות
- **שינוי רגיל**: "זוהה שינוי בעמוד"
- **מבצעים חדשים**: רשימה של המבצעים החדשים שזוהו
- **שינוי סטטוס**: התראה ספציפית על השינוי

## הגדרות למשתמש

### תדירות בדיקה
- ברירת מחדל: כל שעה
- אפשרויות: כל 10 דקות עד כל 6 שעות

### ניהול מעקבים
- השהיה זמנית של מעקב
- הסרת מעקב
- צפייה ברשימת כל המעקבים הפעילים

## אתרים נתמכים
- משקארד
- שופרסל 4U (עם תיקון מיוחד)
- מועדון הוט
- Corporate
- Living
- בהצדעה
- Buff
- Bttru
- חבר
- אשמורת
- ארגון המורים
- אינטל

## הערות טכניות
- המערכת משתמשת ב-Playwright לאתרים עם JavaScript
- HTTP רגיל לאתרים סטטיים
- MongoDB לשמירת נתונים
- Telegram Bot API לתקשורת