# ğŸ¤– Stock Tracker Telegram Bot

<div align="center">

[![Deploy](https://github.com/your-username/stock-tracker-bot/workflows/ğŸš€%20Deploy%20Stock%20Tracker%20Bot/badge.svg)](https://github.com/your-username/stock-tracker-bot/actions)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Python](https://img.shields.io/badge/Python-3.11%2B-brightgreen)](https://python.org)
[![Telegram](https://img.shields.io/badge/Telegram-Bot%20API-blue.svg)](https://core.telegram.org/bots/api)

**×‘×•×˜ ×˜×œ×’×¨× ××ª×§×“× ×œ××¢×§×‘ ××—×¨ ×–××™× ×•×ª ××•×¦×¨×™× ×‘××•×¢×“×•× ×™ ×”×§× ×™×•×ª ×”×™×©×¨××œ×™×™×**

[English](#english) | [×¢×‘×¨×™×ª](#hebrew)

</div>

---

## ğŸ‡®ğŸ‡± ×¢×‘×¨×™×ª {#hebrew}

### ğŸ“‹ ×ª×•×›×Ÿ ×¢× ×™×™× ×™×

- [×ª×™××•×¨ ×”×¤×¨×•×™×§×˜](#×ª×™××•×¨-×”×¤×¨×•×™×§×˜)
- [××•×¢×“×•× ×™× × ×ª××›×™×](#××•×¢×“×•× ×™×-× ×ª××›×™×)
- [×ª×›×•× ×•×ª ×¢×™×§×¨×™×•×ª](#×ª×›×•× ×•×ª-×¢×™×§×¨×™×•×ª)
- [×”×ª×§× ×” ××§×•××™×ª](#×”×ª×§× ×”-××§×•××™×ª)
- [×¤×¨×™×¡×” ×œ×¢× ×Ÿ](#×¤×¨×™×¡×”-×œ×¢× ×Ÿ)
- [×©×™××•×© ×‘×‘×•×˜](#×©×™××•×©-×‘×‘×•×˜)
- [×”×’×“×¨×•×ª ××ª×§×“××•×ª](#×”×’×“×¨×•×ª-××ª×§×“××•×ª)
- [×¤×™×ª×•×— ×•×ª×¨×•××”](#×¤×™×ª×•×—-×•×ª×¨×•××”)

### ğŸ¯ ×ª×™××•×¨ ×”×¤×¨×•×™×§×˜

×‘×•×˜ ×˜×œ×’×¨× ×—×›× ×©×¢×•×§×‘ ××—×¨ ×–××™× ×•×ª ××•×¦×¨×™× ×‘××•×¢×“×•× ×™ ×”×§× ×™×•×ª ×”×™×©×¨××œ×™×™× ×•×©×•×œ×— ×”×ª×¨××•×ª ×‘×¨×’×¢ ×©××•×¦×¨ ×—×•×–×¨ ×œ××œ××™. ×”×‘×•×˜ ×‘× ×•×™ ×¢× ×˜×›× ×•×œ×•×’×™×•×ª ××ª×§×“××•×ª ×©×œ 2025 ×•××•×ª×× ×œ×¤×¨×™×¡×” ×‘×¢× ×Ÿ.

**ğŸ”¥ ×—×“×© ×‘-2025:**
- ×©×™××•×© ×‘-**UV Package Manager** ×œ××”×™×¨×•×ª ××§×¡×™××œ×™×ª
- **Ruff Linter** ×›×ª×•×‘ ×‘-Rust ×œ×‘×™×¦×•×¢×™× ××¢×•×œ×™×  
- **PyMongo 4.14** ×¢× ×ª××™×›×” ××œ××” ×‘-MongoDB 8.0
- **python-telegram-bot 22.3** ×¢× ×›×œ ×”×ª×›×•× ×•×ª ×”×—×“×©×•×ª
- **Playwright 1.46** ×œ×¡×§×¨×™×™×¤×™× ×’ ××ª×¨×™× ×“×™× ××™×™×

### ğŸª ××•×¢×“×•× ×™× × ×ª××›×™×

- ğŸ’³ **××©×§××¨×“** - ××©×§××¨×“
- ğŸ“± **××•×¢×“×•×Ÿ ×”×•×˜** - Hot Mobile
- ğŸ¢ **Corporate** - ×§×•×¨×¤×•×¨×™×™×˜
- ğŸ  **Living** - ×œ×™×•×•×™× ×’
- ğŸ–ï¸ **×‘×”×¦×“×¢×”** - ×¦×”"×œ ×•××©×˜×¨×”
- ğŸ’ª **Buff** - ×—×‘×¨×ª ×‘××¤
- ğŸ›ï¸ **Bttru** - ×‘×˜×¨×•
- ğŸ‘¥ **×—×‘×¨** - ××•×¢×“×•×Ÿ ×—×‘×¨
- ğŸ›ï¸ **××©××•×¨×ª** - ××•×¢×“×•×Ÿ ××©××•×¨×ª
- ğŸ‘¨â€ğŸ« **××¨×’×•×Ÿ ×”××•×¨×™×** - ××•×¢×“×•×Ÿ ××•×¨×™×
- ğŸ’» **××™× ×˜×œ** - ××•×¢×“×•×Ÿ ××™× ×˜×œ

### â­ ×ª×›×•× ×•×ª ×¢×™×§×¨×™×•×ª

#### ğŸš€ ×™×›×•×œ×•×ª ×‘×¡×™×¡×™×•×ª
- âœ… **××¢×§×‘ ××•×˜×•××˜×™** - ×”×•×¡×¤×ª ××•×¦×¨×™× ×œ××¢×§×‘ ×‘×©×œ×™×—×ª ×§×™×©×•×¨
- ğŸ”” **×”×ª×¨××•×ª ××™×™×“×™×•×ª** - ×”×•×“×¢×” ×‘×¨×’×¢ ×©××•×¦×¨ ×—×•×–×¨ ×œ××œ××™
- â° **×ª×“×™×¨×•×ª ××•×ª×××ª** - ×‘×—×™×¨×ª ×ª×“×™×¨×•×ª ×‘×“×™×§×” ×œ×›×œ ××•×¦×¨
- ğŸ“Š **× ×™×”×•×œ ××¢×§×‘×™×** - ×¦×¤×™×”, ×”×©×”×™×” ×•×”×¡×¨×” ×©×œ ××¢×§×‘×™×

#### ğŸ”§ ×ª×›×•× ×•×ª ××ª×§×“××•×ª  
- ğŸ¤– **×××©×§ ×¢×‘×¨×™×ª ××œ×** - ×›×¤×ª×•×¨×™× ×•×”×”×•×“×¢×•×ª ×‘×¢×‘×¨×™×ª
- ğŸ”„ **×‘×“×™×§×•×ª ××¡×™× ×›×¨×•× ×™×•×ª** - ×¢×‘×•×“×” ××”×™×¨×” ×•×™×¢×™×œ×”
- ğŸ›¡ï¸ **Rate Limiting** - ×× ×™×¢×ª ×©×™××•×© ×œ×¨×¢×”
- ğŸ“ˆ **××¢×§×‘ ×¡×˜×˜×™×¡×˜×™×§×•×ª** - × ×ª×•× ×™× ×¢×œ ×”×©×™××•×©
- ğŸ¥ **Health Checks** - ×‘×“×™×§×•×ª ×ª×§×™× ×•×ª ××•×˜×•××˜×™×•×ª

#### ğŸ•·ï¸ ×˜×›× ×•×œ×•×’×™×•×ª ×¡×§×¨×™×™×¤×™× ×’
- ğŸ­ **Playwright** - ×œ××ª×¨×™× ×¢× JavaScript
- ğŸŒ **HTTP Requests** - ×œ××ª×¨×™× ×¡×˜×˜×™×™×  
- ğŸ” **BeautifulSoup** - × ×™×ª×•×— HTML ××ª×§×“×
- âš¡ **Batch Processing** - ×¢×™×‘×•×“ ××§×‘×™×œ ××”×™×¨

### ğŸš€ ×”×ª×§× ×” ××§×•××™×ª

#### ×“×¨×™×©×•×ª ××¢×¨×›×ª

- **Python 3.11+** (××•××œ×¥ 3.12 ××• 3.13)
- **MongoDB** (××§×•××™ ××• Atlas)
- **Git**
- **UV Package Manager** (××•×¤×¦×™×•× ×œ×™ ××‘×œ ××•××œ×¥)

#### 1. ×”×•×¨×“×ª ×”×¤×¨×•×™×§×˜

```bash
# ×©×›×¤×•×œ ×”×¤×¨×•×™×§×˜
git clone https://github.com/your-username/stock-tracker-bot.git
cd stock-tracker-bot
```

#### 2. ×”×’×“×¨×ª ×¡×‘×™×‘×” ×•×™×¨×˜×•××œ×™×ª

```bash
# ×¢× UV (××”×™×¨ ×™×•×ª×¨)
uv venv .venv
source .venv/bin/activate  # Linux/Mac
# ××•
.venv\Scripts\activate     # Windows

# ×¢× Python ×¨×’×™×œ
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# ××•  
.venv\Scripts\activate     # Windows
```

#### 3. ×”×ª×§× ×ª ×ª×œ×•×™×•×ª

```bash
# ×¢× UV (××”×™×¨ ×××•×“!)
uv pip install -r requirements.txt

# ×¢× pip ×¨×’×™×œ
pip install -r requirements.txt
```

#### 4. ×”×ª×§× ×ª Playwright

```bash
# ×”×ª×§× ×ª ×“×¤×“×¤× ×™× ×œ×¡×§×¨×™×™×¤×™× ×’
playwright install chromium
```

#### 5. ×”×’×“×¨×ª ××©×ª× ×™ ×¡×‘×™×‘×”

```bash
# ×”×¢×ª×§×ª ×§×•×‘×¥ ×”×“×•×’××”
cp .env.example .env

# ×¢×¨×™×›×ª ×”×§×•×‘×¥ ×¢× ×”× ×ª×•× ×™× ×©×œ×›×
nano .env  # ××• ×¢×•×¨×š ×˜×§×¡×˜ ××—×¨
```

**×”×’×“×¨×•×ª ×—×•×‘×” ×‘-.env:**
```bash
TELEGRAM_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz  # ×-@BotFather
MONGODB_URI=mongodb://localhost:27017/                    # MongoDB
DB_NAME=stock_tracker_bot
ENVIRONMENT=development
```

#### 6. ×”×¤×¢×œ×ª ×”××¢×¨×›×ª

```bash
# ×”×¤×¢×œ×ª ×”×‘×•×˜
python main.py
```

**×”×‘×•×˜ ×××•×¨ ×œ×”×™×•×ª ×–××™×Ÿ ×‘-** `http://localhost:10000` ğŸ‰

### â˜ï¸ ×¤×¨×™×¡×” ×œ×¢× ×Ÿ

#### ğŸŒ Render.com (××•××œ×¥)

1. **Fork ×”×¤×¨×•×™×§×˜** ×‘-GitHub
2. **×¦×•×¨ ×—×©×‘×•×Ÿ** ×‘-[Render.com](https://render.com)
3. **×¦×•×¨ Web Service ×—×“×©** ×•×—×‘×¨ ×œrepository
4. **Render ×™×–×”×” ××•×˜×•××˜×™×ª** ××ª `render.yaml`
5. **×”×’×“×¨ ××©×ª× ×™ ×¡×‘×™×‘×”:**
   - `TELEGRAM_TOKEN` - ×-@BotFather
   - `MONGODB_URI` - ×-MongoDB Atlas
   - ×”×©××¨ ×™×•×’×“×¨×• ××•×˜×•××˜×™×ª

#### ğŸ—„ï¸ MongoDB Atlas

1. **×¦×•×¨ ×—×©×‘×•×Ÿ ×—×™× ××™** ×‘-[MongoDB Atlas](https://cloud.mongodb.com)
2. **×¦×•×¨ Cluster ×—×“×©** (M0 - ×—×™× ××™)
3. **×”×•×¡×£ ××©×ª××©** ×¢× ×”×¨×©××•×ª ×§×¨×™××”/×›×ª×™×‘×”
4. **×”×’×“×¨ IP Access List** - ×”×•×¡×£ `0.0.0.0/0` ×œ×¤×™×ª×•×—
5. **×§×‘×œ ××ª ×”-Connection String**

#### ğŸ¤– ×™×¦×™×¨×ª ×‘×•×˜ ×˜×œ×’×¨×

1. **×¤× ×” ×œ-@BotFather** ×‘×˜×œ×’×¨×
2. **×©×œ×—:** `/newbot`
3. **×‘×—×¨ ×©× ×•×™×•×–×¨× ×™×™×** ×œ×‘×•×˜
4. **×©××•×¨ ××ª ×”TOKEN** ×©×ª×§×‘×œ
5. **×”×’×“×¨ commands:** `/setcommands`

```
start - ×”×ª×—×œ ×œ×¢×‘×•×“ ×¢× ×”×‘×•×˜
help - ×¢×–×¨×” ×•××“×¨×™×š ×©×™××•×©  
mystocks - ×”×¦×’ ××ª ×”××¢×§×‘×™× ×©×œ×™
stats - ×¡×˜×˜×™×¡×˜×™×§×•×ª ×”×‘×•×˜
```

### ğŸ® ×©×™××•×© ×‘×‘×•×˜

#### ×”×•×¡×¤×ª ××¢×§×‘ ×—×“×©

1. **×©×œ×— ×§×™×©×•×¨ ×œ××•×¦×¨** ××• ×œ×—×¥ "â• ×”×•×¡×£ ××¢×§×‘"
2. **×”×‘×•×˜ ×™×‘×“×§** ××ª ×¤×¨×˜×™ ×”××•×¦×¨
3. **×‘×—×¨ ×ª×“×™×¨×•×ª ×‘×“×™×§×”** (10 ×“×§×•×ª - 24 ×©×¢×•×ª)
4. **×§×‘×œ ×”×ª×¨××•×ª** ×›×©×”××•×¦×¨ ×—×•×–×¨ ×œ××œ××™!

#### × ×™×”×•×œ ××¢×§×‘×™×

- **ğŸ“œ ×”×¨×©×™××” ×©×œ×™** - ×¦×¤×™×” ×‘×›×œ ×”××¢×§×‘×™×
- **â¸ ×”×©×”×” ××¢×§×‘** - ×¢×¦×™×¨×” ×–×× ×™×ª
- **â–¶ï¸ ×—×™×“×•×© ××¢×§×‘** - ×”××©×›×ª ×‘×“×™×§×•×ª
- **ğŸ—‘ ×”×¡×¨×ª ××¢×§×‘** - ××—×™×§×” ×¡×•×¤×™×ª

#### ×¤×§×•×“×•×ª × ×•×¡×¤×•×ª

- `/help` - ××“×¨×™×š ×©×™××•×© ××œ×
- `/stats` - ×¡×˜×˜×™×¡×˜×™×§×•×ª ×•××™×“×¢ ×¢×œ ×”×‘×•×˜
- `/mystocks` - ×¨×©×™××ª ×”××¢×§×‘×™× ×©×œ×›×

### âš™ï¸ ×”×’×“×¨×•×ª ××ª×§×“××•×ª

#### ğŸ”§ ×§×•×‘×¥ config.py

```python
# ×ª×“×™×¨×•×ª ×‘×“×™×§×” ×›×œ×œ×™×ª (×“×§×•×ª)
DEFAULT_CHECK_INTERVAL = 60

# ××’×‘×œ×•×ª ×‘×§×©×•×ª ×œ××©×ª××©  
RATE_LIMIT_PER_USER = 50
RATE_LIMIT_WINDOW = 86400  # 24 ×©×¢×•×ª

# ×”×’×“×¨×•×ª ×¡×§×¨×™×™×¤×™× ×’
SCRAPER_TIMEOUT = 30
MAX_CONCURRENT_REQUESTS = 10
```

#### ğŸª ×”×•×¡×¤×ª ××•×¢×“×•×Ÿ ×—×“×©

×‘-`config.py`, ×”×•×¡×£ ×œ-`SUPPORTED_CLUBS`:

```python
'new_club': {
    'name': '××•×¢×“×•×Ÿ ×—×“×©',
    'base_url': 'https://newclub.co.il',
    'stock_selector': '.stock-status',  # CSS selector
    'out_of_stock_indicators': ['××–×œ', '×œ× ×–××™×Ÿ'],
    'requires_js': False,  # True ×× ×¦×¨×™×š Playwright
    'headers': {'User-Agent': 'Custom Bot'}
}
```

### ğŸ”„ GitHub Actions CI/CD

×”×¤×¨×•×™×§×˜ ×›×•×œ×œ pipeline ××ª×§×“× ×¢×:

- âœ… **Quality Checks** - Black, Ruff, MyPy
- ğŸ›¡ï¸ **Security Scans** - Bandit, Safety, Trivy
- ğŸ§ª **Testing Matrix** - Ubuntu/Windows/macOS
- ğŸš€ **Auto Deploy** - Staging + Production
- ğŸ“Š **Monitoring** - Health checks ×•-notifications

**×”×¤×¢×œ×”:**
1. Push ×œ-`main` â†’ Deploy ×œProduction
2. Push ×œ-`develop` â†’ Deploy ×œStaging  
3. Pull Request â†’ ×¨×§ testing

### ğŸ“Š ××¢×§×‘ ×•× ×™×˜×•×¨

#### Health Endpoints

- `GET /` - Basic health check
- `GET /health` - Detailed health status
- `GET /stats` - Bot usage statistics

#### Logs

```bash
# ×¦×¤×™×” ×‘-logs ×‘-Render
render logs -f your-service-name

# Logs ××§×•××™×™×
tail -f app.log
```

### ğŸ§ª ×¤×™×ª×•×— ×•×ª×¨×•××”

#### ×”×¨×¦×ª ×‘×“×™×§×•×ª

```bash
# ×”×ª×§× ×ª dependencies ×œ×¤×™×ª×•×—
uv pip install pytest pytest-asyncio pytest-cov pytest-mock

# ×”×¨×¦×ª ×›×œ ×”×‘×“×™×§×•×ª  
pytest

# ×‘×“×™×§×•×ª ×¢× coverage
pytest --cov=. --cov-report=html
```

#### Code Quality

```bash
# ×”×ª×§× ×ª ×›×œ×™×
uv pip install black ruff mypy bandit

# Format code
black .

# Lint
ruff check .

# Type checking  
mypy .

# Security scan
bandit -r .
```

#### ××‘× ×” ×”×¤×¨×•×™×§×˜

```
stock-tracker-bot/
â”œâ”€â”€ main.py              # Entry point
â”œâ”€â”€ bot.py               # Bot logic  
â”œâ”€â”€ config.py            # Configuration
â”œâ”€â”€ database.py          # MongoDB operations
â”œâ”€â”€ scrapers.py          # Web scraping
â”œâ”€â”€ requirements.txt     # Dependencies
â”œâ”€â”€ render.yaml          # Render deployment
â”œâ”€â”€ .env.example         # Environment template
â”œâ”€â”€ .github/workflows/   # CI/CD pipeline
â”œâ”€â”€ tests/               # Unit tests
â””â”€â”€ docs/                # Documentation
```

### ğŸ› ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª × ×¤×•×¦×•×ª

#### ×‘×•×˜ ×œ× ××’×™×‘

```bash
# ×‘×“×•×§ ×©×”TOKEN × ×›×•×Ÿ
curl https://api.telegram.org/bot<YOUR_TOKEN>/getMe

# ×‘×“×•×§ logs
tail -f app.log
```

#### ×©×’×™××•×ª MongoDB

```bash
# ×‘×“×•×§ ×—×™×‘×•×¨
python -c "from database import DatabaseManager; import asyncio; asyncio.run(DatabaseManager().connect())"
```

#### ×¡×§×¨×™×™×¤×™× ×’ ×œ× ×¢×•×‘×“

```bash
# ×‘×“×•×§ Playwright
playwright install chromium

# ×‘×“×•×§ ×—×™×‘×•×¨ ×œ××ª×¨
curl -I https://www.mashkarcard.co.il
```

### ğŸ“„ ×¨×™×©×™×•×Ÿ

×¤×¨×•×™×§×˜ ×–×” ××¤×•×¨×¡× ×ª×—×ª [×¨×™×©×™×•×Ÿ MIT](LICENSE).

### ğŸ¤ ×ª××™×›×” ×•×¢×–×¨×”

- ğŸ› **×‘××’×™×:** [GitHub Issues](https://github.com/your-username/stock-tracker-bot/issues)
- ğŸ’¡ **×¨×¢×™×•× ×•×ª:** [GitHub Discussions](https://github.com/your-username/stock-tracker-bot/discussions)  
- ğŸ“§ **×™×¦×™×¨×ª ×§×©×¨:** your-email@example.com

---

## ğŸ‡ºğŸ‡¸ English {#english}

### ğŸ¯ Project Description

An advanced Telegram bot for tracking product availability in Israeli shopping clubs with instant notifications when items return to stock. Built with cutting-edge 2025 technologies and optimized for cloud deployment.

### ğŸª Supported Stores

- Mashkar Card, Hot Club, Corporate, Living, BeHatza'a
- Buff, Bttru, Haver, Ashmurat, Teachers Organization, Intel

### â­ Key Features

- **Automatic Tracking** - Add products by sending URL
- **Instant Notifications** - Get alerts when back in stock  
- **Custom Frequency** - Choose check intervals per product
- **Hebrew Interface** - Full Hebrew UI and messages
- **Advanced Scraping** - Playwright + BeautifulSoup + HTTP
- **Cloud Ready** - Optimized for Render deployment

### ğŸš€ Quick Start

1. **Clone repository**
2. **Install dependencies:** `uv pip install -r requirements.txt`
3. **Setup environment:** Copy `.env.example` to `.env`
4. **Configure bot token and MongoDB**
5. **Run:** `python main.py`

### ğŸŒ Deploy to Render

1. Fork this repository
2. Connect to Render.com
3. Set environment variables:
   - `TELEGRAM_TOKEN`
   - `MONGODB_URI`
4. Deploy automatically with `render.yaml`

### ğŸ“Š Tech Stack

- **Python 3.12+** with asyncio
- **python-telegram-bot 22.3** (Bot API 9.1)
- **PyMongo 4.14** (MongoDB 8.0)
- **Playwright 1.46** + BeautifulSoup
- **FastAPI** + Uvicorn
- **APScheduler** for background jobs

### ğŸ§ª Testing & CI/CD

- **GitHub Actions** with UV and Ruff
- **Matrix testing** (Ubuntu/Windows/macOS)
- **Security scans** (Bandit, Safety, Trivy)
- **Auto deploy** to staging/production

---

<div align="center">

**â­ ×× ×”×¤×¨×•×™×§×˜ ×¢×–×¨ ×œ×›×, ××©××— ×œ×›×•×›×‘ ×‘-GitHub! â­**

Made with â¤ï¸ in Israel ğŸ‡®ğŸ‡±

</div>
